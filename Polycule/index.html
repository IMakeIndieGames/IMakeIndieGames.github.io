<!doctype html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.18.2/cytoscape.min.js"></script>
    <script src="https://unpkg.com/layout-base/layout-base.js"></script>
    <script src="https://unpkg.com/cose-base/cose-base.js"></script>
    <script src="https://unpkg.com/cytoscape-fcose/cytoscape-fcose.js"></script>
    <script src="https://unpkg.com/layout-base/layout-base.js"></script>
    <script src="https://unpkg.com/cose-base/cose-base.js"></script>
    <script src="cytoscape-cose-bilkent.js"></script>
    <script src="https://unpkg.com/popper.js@1.14.7/dist/umd/popper.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/cytoscape-popper@1.0.4/cytoscape-popper.min.js"></script>
    <script src="https://unpkg.com/tippy.js@4.0.1/umd/index.all.min.js"></script>
    <script src="https://unpkg.com/layout-base/layout-base.js"></script>
    <script src="https://unpkg.com/cose-base/cose-base.js"></script>
</head>
<style>
    #cy {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0px;
        left: 0px;
    }
</style>
<body>
    <div id="cy"></div>
    <script>

        var ret = "[ { data: { id: 'Ty' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Ally' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Amanda' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Chara' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Joshua' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Alex' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Kris' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Haley' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Abzi' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Andrew' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Emma' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Aliah' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Eowyn' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Jess' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Winter' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Danilo' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Ivan' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Kim' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Quazie' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'George' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Heather' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Ray' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Shell' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Katie' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Jesse' }, style: { 'background-color': '#0000FF', width: 40, height: 40, 'background-opacity': 0.5, 'font-size': 10, color: '#FFFFFF' } }, { data: { id: 'Ty↔Ally', source: 'Ty', target: 'Ally' }, style: { 'line-opacity': 1 } }, { data: { id: 'Ty↔Amanda', source: 'Ty', target: 'Amanda' }, style: { 'line-opacity': 1 } }, { data: { id: 'Ally↔Chara', source: 'Ally', target: 'Chara' }, style: { 'line-opacity': 1 } }, { data: { id: 'Chara↔Alex', source: 'Chara', target: 'Alex' }, style: { 'line-opacity': 1 } }, { data: { id: 'Chara↔Kris', source: 'Chara', target: 'Kris' }, style: { 'line-opacity': 1 } }, { data: { id: 'Amanda↔Joshua', source: 'Amanda', target: 'Joshua' }, style: { 'line-opacity': 1 } }, { data: { id: 'Kris↔Haley', source: 'Kris', target: 'Haley' }, style: { 'line-opacity': 1 } }, { data: { id: 'Alex↔Abzi', source: 'Alex', target: 'Abzi' }, style: { 'line-opacity': 1 } }, { data: { id: 'Alex↔Andrew', source: 'Alex', target: 'Andrew' }, style: { 'line-opacity': 1 } }, { data: { id: 'Emma↔Andrew', source: 'Emma', target: 'Andrew' }, style: { 'line-opacity': 1 } }, { data: { id: 'Emma↔Alex', source: 'Emma', target: 'Alex' }, style: { 'line-opacity': 1 } }, { data: { id: 'Emma↔Aliah', source: 'Emma', target: 'Aliah' }, style: { 'line-opacity': 1 } }, { data: { id: 'Abzi↔Eowyn', source: 'Abzi', target: 'Eowyn' }, style: { 'line-opacity': 1 } }, { data: { id: 'Eowyn↔Jess', source: 'Eowyn', target: 'Jess' }, style: { 'line-opacity': 1 } }, { data: { id: 'Abzi↔Winter', source: 'Abzi', target: 'Winter' }, style: { 'line-opacity': 1 } }, { data: { id: 'Winter↔Danilo', source: 'Winter', target: 'Danilo' }, style: { 'line-opacity': 1 } }, { data: { id: 'Winter↔Ivan', source: 'Winter', target: 'Ivan' }, style: { 'line-opacity': 1 } }, { data: { id: 'Winter↔Kim', source: 'Winter', target: 'Kim' }, style: { 'line-opacity': 1 } }, { data: { id: 'Haley↔Quazie', source: 'Haley', target: 'Quazie' }, style: { 'line-opacity': 1 } }, { data: { id: 'George↔Heather', source: 'George', target: 'Heather' }, style: { 'line-opacity': 1 } }, { data: { id: 'Ray↔Shell', source: 'Ray', target: 'Shell' }, style: { 'line-opacity': 1 } }, { data: { id: 'Abzi↔Heather', source: 'Abzi', target: 'Heather' }, style: { 'line-opacity': 1 } }, { data: { id: 'George↔Alex', source: 'George', target: 'Alex' }, style: { 'line-opacity': 1 } }, { data: { id: 'Katie↔Jesse', source: 'Katie', target: 'Jesse' }, style: { 'line-opacity': 1 } } ]";

        function printRet(ret) {
            var data = JSON.parse(JSON.stringify(ret));

            var cy = cytoscape({

                container: document.getElementById('cy'),

                elements: data,

                style: [
                    {
                        selector: 'node',
                        style: {
                            'width': 20,
                            'height': 20,
                            'border-width': '2px',
                            //'border-color': '#262626',
                            'border-opacity': 0.5,
                            //'background-color': '#666',
                            'label': 'data(id)',
                            'text-valign': 'center',
                            'font-size': 3,
                            //'text-background-color': '#1b1b1b',
                            'text-background-opacity': 0,
                            'text-background-shape': 'rectangle',
                            //'text-background-padding': '10px'
                        }
                    },

                    {
                        selector: 'edge',
                        style: {
                            'width': 1,
                            'line-color': '#ccc',
                            //'target-arrow-color': '#ccc',
                            //'target-arrow-shape': 'triangle',
                            'curve-style': 'bezier'
                        }

                    },

                    {
                        selector: 'node.highlight',
                        style: {
                            'border-color': '#FFF',
                            'border-width': '2px'
                        }
                    },

                    {
                        selector: 'node.semitransp',
                        style: { 'opacity': '0.1' }
                    },

                    {
                        selector: 'edge.highlight',
                        style: { 'mid-target-arrow-color': '#FFF' }
                    },

                    {
                        selector: 'edge.semitransp',
                        style: { 'opacity': '0.1' }
                    }
                ],

                layout: {
                    name: 'cose',
                    randomize: true,
                    quality: "default",
                    idealEdgeLength: 5,
                    //padding: 1,
                    //animate: false,
                    //nodeRepulsion: function( node ){ return 2048; },
                    fit: true,
                    //gravity: 0.5
                }
            });

            function makePopper(ele) {
                let ref = ele.popperRef(); // used only for positioning

                ele.tippy = tippy(ref, { // tippy options:
                    content: () => {
                        let content = document.createElement('div');

                        content.innerHTML = ele.id();

                        return content;
                    },
                    trigger: 'manual' // probably want manual mode
                });
            }

            cy.ready(function () {
                cy.elements().forEach(function (ele) {
                    makePopper(ele);
                });
            });

            cy.elements().unbind('mouseover');
            cy.elements().bind('mouseover', (event) => event.target.tippy.show());

            cy.elements().unbind('mouseout');
            cy.elements().bind('mouseout', (event) => event.target.tippy.hide());

            cy.on('mouseover', 'node', function (e) {
                var sel = e.target;
                cy.elements().difference(sel.incomers()).difference(sel.outgoers()).not(sel).addClass('semitransp');
                sel.addClass('highlight').outgoers().addClass('highlight');
                sel.addClass('highlight').incomers().addClass('highlight');
            });

            cy.on('mouseout', 'node', function (e) {
                var sel = e.target;
                cy.elements().removeClass('semitransp');
                sel.removeClass('highlight').outgoers().removeClass('highlight');
                sel.removeClass('highlight').incomers().removeClass('highlight');
            });
        };

        printRet(ret);
    </script>
</body>
</html>